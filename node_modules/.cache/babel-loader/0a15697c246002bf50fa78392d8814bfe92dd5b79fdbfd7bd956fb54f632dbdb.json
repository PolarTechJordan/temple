{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"result-page\"\n};\nconst _hoisted_2 = {\n  class: \"container\"\n};\nconst _hoisted_3 = {\n  class: \"main-content\"\n};\nconst _hoisted_4 = {\n  class: \"result-section\"\n};\nconst _hoisted_5 = {\n  class: \"fortune-result\"\n};\nconst _hoisted_6 = {\n  class: \"result-content\"\n};\nconst _hoisted_7 = {\n  class: \"payment-section\"\n};\nconst _hoisted_8 = {\n  class: \"payment-form\"\n};\nconst _hoisted_9 = {\n  class: \"incense-selection\"\n};\nconst _hoisted_10 = {\n  class: \"input-group\"\n};\nconst _hoisted_11 = {\n  class: \"input-group\"\n};\nconst _hoisted_12 = {\n  class: \"price-display\"\n};\nconst _hoisted_13 = {\n  class: \"price\"\n};\nconst _hoisted_14 = [\"disabled\"];\nconst _hoisted_15 = {\n  key: 0,\n  class: \"error-message\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"h1\", null, _toDisplayString(_ctx.$t('result.title')), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" 上方：算命结果 \"), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_cache[3] || (_cache[3] = _createElementVNode(\"h2\", null, \"神算结果\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"p\", null, _toDisplayString($options.fortuneResult), 1 /* TEXT */)])]), _cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n    class: \"blessing-hint\"\n  }, [_createElementVNode(\"h3\", null, \"六神已定，虔诚上香，神明护佑\"), _createElementVNode(\"p\", null, \"请在下方选择香火数量并完成支付，诚心上香获得神明护佑。\")], -1 /* CACHED */))]), _createCommentVNode(\" 下方：支付功能 \"), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_cache[9] || (_cache[9] = _createElementVNode(\"h2\", null, \"香火支付\", -1 /* CACHED */)), _cache[10] || (_cache[10] = _createElementVNode(\"p\", {\n    class: \"payment-description\"\n  }, \"选择香火数量，虔诚支付获得护佑\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", null, \"香火数量\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.incenseCount = $event),\n    min: \"1\",\n    max: \"100\",\n    placeholder: \"请输入香火数量\",\n    class: \"count-input\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.incenseCount, void 0, {\n    number: true\n  }]])]), _createElementVNode(\"div\", _hoisted_11, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", null, \"选择币种\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.selectedCurrency = $event),\n    class: \"currency-select\"\n  }, _cache[6] || (_cache[6] = [_createElementVNode(\"option\", {\n    value: \"SOL\"\n  }, \"SOL\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"USDT\"\n  }, \"USDT\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"BTC\"\n  }, \"BTC\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"ETH\"\n  }, \"ETH\", -1 /* CACHED */)]), 512 /* NEED_PATCH */), [[_vModelSelect, $data.selectedCurrency]])])]), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"p\", null, [_cache[8] || (_cache[8] = _createTextVNode(\"总价: \")), _createElementVNode(\"span\", _hoisted_13, _toDisplayString($options.totalPrice) + \" \" + _toDisplayString($data.selectedCurrency), 1 /* TEXT */)])]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.processPayment && $options.processPayment(...args)),\n    disabled: !$options.isValidSelection || $data.processing,\n    class: \"payment-btn\"\n  }, _toDisplayString($data.processing ? '支付中...' : '立即支付'), 9 /* TEXT, PROPS */, _hoisted_14), $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, _toDisplayString($data.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_toDisplayString","_ctx","$t","_hoisted_3","_createCommentVNode","_hoisted_4","_hoisted_5","_hoisted_6","$options","fortuneResult","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","type","$data","incenseCount","$event","min","max","placeholder","number","_hoisted_11","selectedCurrency","value","_hoisted_12","_hoisted_13","totalPrice","onClick","_cache","args","processPayment","disabled","isValidSelection","processing","_hoisted_14","error","_hoisted_15"],"sources":["/Users/Jordan/workSpace/temple/src/views/ResultPage.vue"],"sourcesContent":["<template>\n  <div class=\"result-page\">\n    <div class=\"container\">\n      <h1>{{ $t('result.title') }}</h1>\n      \n      <div class=\"main-content\">\n        <!-- 上方：算命结果 -->\n        <div class=\"result-section\">\n          <div class=\"fortune-result\">\n            <h2>神算结果</h2>\n            <div class=\"result-content\">\n              <p>{{ fortuneResult }}</p>\n            </div>\n          </div>\n          \n          <div class=\"blessing-hint\">\n            <h3>六神已定，虔诚上香，神明护佑</h3>\n            <p>请在下方选择香火数量并完成支付，诚心上香获得神明护佑。</p>\n          </div>\n        </div>\n\n        <!-- 下方：支付功能 -->\n        <div class=\"payment-section\">\n          <div class=\"payment-form\">\n            <h2>香火支付</h2>\n            <p class=\"payment-description\">选择香火数量，虔诚支付获得护佑</p>\n            \n            <div class=\"incense-selection\">\n              <div class=\"input-group\">\n                <label>香火数量</label>\n                <input\n                  type=\"number\"\n                  v-model.number=\"incenseCount\"\n                  min=\"1\"\n                  max=\"100\"\n                  placeholder=\"请输入香火数量\"\n                  class=\"count-input\"\n                />\n              </div>\n              \n              <div class=\"input-group\">\n                <label>选择币种</label>\n                <select v-model=\"selectedCurrency\" class=\"currency-select\">\n                  <option value=\"SOL\">SOL</option>\n                  <option value=\"USDT\">USDT</option>\n                  <option value=\"BTC\">BTC</option>\n                  <option value=\"ETH\">ETH</option>\n                </select>\n              </div>\n            </div>\n            \n            <div class=\"price-display\">\n              <p>总价: <span class=\"price\">{{ totalPrice }} {{ selectedCurrency }}</span></p>\n            </div>\n            \n            <button \n              @click=\"processPayment\"\n              :disabled=\"!isValidSelection || processing\"\n              class=\"payment-btn\"\n            >\n              {{ processing ? '支付中...' : '立即支付' }}\n            </button>\n\n            <div v-if=\"error\" class=\"error-message\">\n              {{ error }}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { useRouter } from 'vue-router'\nimport { useAppStore } from '@/stores/app'\n\nexport default {\n  name: 'ResultPage',\n  setup() {\n    const router = useRouter()\n    const appStore = useAppStore()\n    \n    // 语言感知的导航函数\n    const navigateTo = (path) => {\n      const currentPath = router.currentRoute.value.path\n      const isEnglish = currentPath.startsWith('/en')\n      const targetPath = isEnglish ? `/en${path}` : path\n      router.push(targetPath)\n    }\n    \n    return {\n      router,\n      appStore,\n      navigateTo\n    }\n  },\n  data() {\n    return {\n      incenseCount: 1,\n      selectedCurrency: 'SOL',\n      currencyRates: {\n        SOL: 0.01,\n        USDT: 1,\n        BTC: 0.00001,\n        ETH: 0.0003\n      },\n      processing: false,\n      error: null\n    }\n  },\n  computed: {\n    fortuneResult() {\n      // 从store获取算命结果\n      const result = this.appStore.fortuneResult\n      if (result && result.result) {\n        return `${result.result.title} - ${result.result.description}\\n\\n${result.result.advice}`\n      }\n      return '根据您提供的数字，神明指示：前路光明，贵人相助，但需谨慎行事，避免冲动。近期财运亨通，事业有成，感情和睦。建议多行善事，积累功德。'\n    },\n    totalPrice() {\n      return (this.incenseCount * this.currencyRates[this.selectedCurrency]).toFixed(8)\n    },\n    isValidSelection() {\n      return this.incenseCount > 0 && this.incenseCount <= 100 && this.selectedCurrency\n    }\n  },\n\n  methods: {\n    async processPayment() {\n      if (!this.isValidSelection) return\n      \n      this.processing = true\n      this.error = null\n      \n      try {\n        // 模拟支付处理\n        await new Promise(resolve => setTimeout(resolve, 3000))\n        \n        // 添加功德分\n        this.appStore.addMeritPoints(this.incenseCount * 10)\n        \n        // 添加上香记录\n        this.appStore.addIncenseRecord({\n          count: this.incenseCount,\n          currency: this.selectedCurrency,\n          amount: this.totalPrice,\n          meritGained: this.incenseCount * 10\n        })\n        \n        // 支付成功后直接跳转到上香页面\n        this.navigateTo('/worship')\n        \n      } catch (error) {\n        this.error = '支付失败，请重试'\n        console.error('支付失败:', error)\n        this.processing = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.result-page {\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  padding: 2rem;\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\nh1 {\n  text-align: center;\n  color: white;\n  margin-bottom: 2rem;\n  font-size: 2.5rem;\n}\n\n.main-content {\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n}\n\n.result-section {\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 20px;\n  padding: 2rem;\n  backdrop-filter: blur(10px);\n}\n\n.fortune-result {\n  margin-bottom: 2rem;\n}\n\n.fortune-result h2 {\n  color: #333;\n  margin-bottom: 1rem;\n  text-align: center;\n}\n\n.result-content {\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  padding: 1.5rem;\n  border-radius: 10px;\n  border-left: 4px solid #667eea;\n}\n\n.result-content p {\n  color: #555;\n  font-size: 1.1rem;\n  line-height: 1.6;\n  margin: 0;\n  white-space: pre-line;\n}\n\n.blessing-hint {\n  text-align: center;\n  padding: 1.5rem;\n  background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);\n  border-radius: 10px;\n}\n\n.blessing-hint h3 {\n  color: #856404;\n  margin-bottom: 1rem;\n  font-size: 1.3rem;\n}\n\n.blessing-hint p {\n  color: #856404;\n  margin: 0;\n}\n\n.payment-section {\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 20px;\n  padding: 2rem;\n  backdrop-filter: blur(10px);\n}\n\n.payment-form h2,\n.payment-success h2 {\n  color: #333;\n  margin-bottom: 1rem;\n  text-align: center;\n}\n\n.payment-description {\n  text-align: center;\n  color: #666;\n  margin-bottom: 2rem;\n}\n\n.incense-selection {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n  margin-bottom: 2rem;\n}\n\n.input-group {\n  display: flex;\n  flex-direction: column;\n}\n\n.input-group label {\n  color: #333;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n}\n\n.count-input,\n.currency-select {\n  padding: 0.8rem;\n  border: 2px solid #ddd;\n  border-radius: 8px;\n  font-size: 1rem;\n  transition: border-color 0.3s;\n}\n\n.count-input:focus,\n.currency-select:focus {\n  outline: none;\n  border-color: #667eea;\n}\n\n.price-display {\n  text-align: center;\n  margin-bottom: 2rem;\n  padding: 1rem;\n  background: #f8f9fa;\n  border-radius: 8px;\n}\n\n.price-display p {\n  margin: 0;\n  font-size: 1.2rem;\n  color: #333;\n}\n\n.price {\n  font-weight: bold;\n  color: #667eea;\n}\n\n.payment-btn {\n  width: 100%;\n  padding: 1rem;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 10px;\n  font-size: 1.2rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.payment-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);\n}\n\n.payment-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.error-message {\n  margin-top: 1rem;\n  padding: 1rem;\n  background: #ffe6e6;\n  color: #cc0000;\n  border-radius: 8px;\n  text-align: center;\n}\n\n@media (max-width: 768px) {\n  .main-content {\n    gap: 1rem;\n  }\n\n  .incense-selection {\n    gap: 1rem;\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}