{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"input-page\"\n};\nconst _hoisted_2 = {\n  class: \"language-switcher\"\n};\nconst _hoisted_3 = {\n  class: \"wallet-header\"\n};\nconst _hoisted_4 = {\n  key: 1,\n  class: \"wallet-status\"\n};\nconst _hoisted_5 = {\n  class: \"wallet-address-short\"\n};\nconst _hoisted_6 = {\n  class: \"container\"\n};\nconst _hoisted_7 = {\n  class: \"main-content\"\n};\nconst _hoisted_8 = {\n  class: \"wish-section\"\n};\nconst _hoisted_9 = {\n  class: \"wish-pool\"\n};\nconst _hoisted_10 = {\n  class: \"pool-container\"\n};\nconst _hoisted_11 = [\"placeholder\"];\nconst _hoisted_12 = {\n  class: \"char-counter\"\n};\nconst _hoisted_13 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 语言切换按钮（只在这个页面显示） \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => $setup.switchLanguage('zh-CN')),\n    class: _normalizeClass({\n      active: $setup.currentLocale === 'zh-CN'\n    })\n  }, \" 中文 \", 2 /* CLASS */), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = $event => $setup.switchLanguage('en-US')),\n    class: _normalizeClass({\n      active: $setup.currentLocale === 'en-US'\n    })\n  }, \" English \", 2 /* CLASS */)]), _createCommentVNode(\" 右上角钱包连接按钮 \"), _createElementVNode(\"div\", _hoisted_3, [!$setup.appStore.isWalletConnected ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[2] || (_cache[2] = $event => _ctx.showWalletModal = true),\n    class: \"header-connect-btn\"\n  }, \" Connect \")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"span\", _hoisted_5, _toDisplayString($setup.shortAddress), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.disconnectWallet && $options.disconnectWallet(...args)),\n    class: \"disconnect-btn-small\"\n  }, \"×\")]))]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"h1\", null, _toDisplayString(_ctx.$t('input.title')), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_7, [_createCommentVNode(\" 许愿池 \"), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.wishText = $event),\n    placeholder: _ctx.$t('input.placeholder'),\n    class: \"wish-input\",\n    rows: \"6\",\n    maxlength: \"200\"\n  }, null, 8 /* PROPS */, _hoisted_11), [[_vModelText, $data.wishText]]), _createElementVNode(\"div\", _hoisted_12, _toDisplayString($data.wishText.length) + \"/200\", 1 /* TEXT */)]), _createElementVNode(\"button\", {\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.submitWish && $options.submitWish(...args)),\n    disabled: !$data.wishText.trim(),\n    class: \"submit-btn\"\n  }, _toDisplayString(_ctx.$t('input.submit')), 9 /* TEXT, PROPS */, _hoisted_13)])])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","onClick","_cache","$event","$setup","switchLanguage","_normalizeClass","active","currentLocale","_hoisted_3","appStore","isWalletConnected","_ctx","showWalletModal","_hoisted_4","_hoisted_5","_toDisplayString","shortAddress","args","$options","disconnectWallet","_hoisted_6","$t","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","$data","wishText","placeholder","rows","maxlength","_hoisted_12","length","submitWish","disabled","trim","_hoisted_13"],"sources":["/Users/Jordan/workSpace/temple/src/views/InputPage.vue"],"sourcesContent":["<template>\n  <div class=\"input-page\">\n    <!-- 语言切换按钮（只在这个页面显示） -->\n    <div class=\"language-switcher\">\n      <button \n        @click=\"switchLanguage('zh-CN')\"\n        :class=\"{ active: currentLocale === 'zh-CN' }\"\n      >\n        中文\n      </button>\n      <button \n        @click=\"switchLanguage('en-US')\"\n        :class=\"{ active: currentLocale === 'en-US' }\"\n      >\n        English\n      </button>\n    </div>\n\n    <!-- 右上角钱包连接按钮 -->\n    <div class=\"wallet-header\">\n      <button \n        v-if=\"!appStore.isWalletConnected\"\n        @click=\"showWalletModal = true\"\n        class=\"header-connect-btn\"\n      >\n        Connect\n      </button>\n      <div v-else class=\"wallet-status\">\n        <span class=\"wallet-address-short\">{{ shortAddress }}</span>\n        <button @click=\"disconnectWallet\" class=\"disconnect-btn-small\">×</button>\n      </div>\n    </div>\n\n    <div class=\"container\">\n      <h1>{{ $t('input.title') }}</h1>\n      \n      <div class=\"main-content\">\n        <!-- 许愿池 -->\n        <div class=\"wish-section\">\n          <div class=\"wish-pool\">\n            <div class=\"pool-container\">\n              <textarea\n                v-model=\"wishText\"\n                :placeholder=\"$t('input.placeholder')\"\n                class=\"wish-input\"\n                rows=\"6\"\n                maxlength=\"200\"\n              ></textarea>\n              <div class=\"char-counter\">{{ wishText.length }}/200</div>\n            </div>\n            <button \n              @click=\"submitWish\"\n              :disabled=\"!wishText.trim()\"\n              class=\"submit-btn\"\n            >\n              {{ $t('input.submit') }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { useI18n } from 'vue-i18n'\nimport { useRouter } from 'vue-router'\nimport { useAppStore } from '@/stores/app'\nimport { computed } from 'vue'\n\nexport default {\n  name: 'InputPage',\n  setup() {\n    const { t, locale } = useI18n()\n    const router = useRouter()\n    const appStore = useAppStore()\n\n    // 当前语言\n    const currentLocale = computed(() => locale.value)\n\n    // 切换语言\n    const switchLanguage = (lang) => {\n      locale.value = lang\n      // 根据语言切换路由\n      const currentRoute = router.currentRoute.value\n      if (lang === 'en-US') {\n        // 切换到英文路由\n        if (!currentRoute.path.startsWith('/en')) {\n          router.push('/en' + currentRoute.path)\n        }\n      } else {\n        // 切换到中文路由\n        if (currentRoute.path.startsWith('/en')) {\n          router.push(currentRoute.path.replace('/en', ''))\n        }\n      }\n    }\n\n    // 语言感知的导航函数\n    const navigateTo = (path) => {\n      const currentPath = router.currentRoute.value.path\n      const isEnglish = currentPath.startsWith('/en')\n      const targetPath = isEnglish ? `/en${path}` : path\n      router.push(targetPath)\n    }\n\n    // 简化的钱包地址显示\n    const shortAddress = computed(() => {\n      if (appStore.walletAddress) {\n        return appStore.walletAddress.slice(0, 6) + '...' + appStore.walletAddress.slice(-4)\n      }\n      return ''\n    })\n\n    return {\n      t,\n      router,\n      appStore,\n      navigateTo,\n      currentLocale,\n      switchLanguage,\n      shortAddress\n    }\n  },\n  data() {\n    return {\n      wishText: '',\n      connecting: false,\n      error: null\n    }\n  },\n  methods: {\n    async connectWallet() {\n      this.connecting = true\n      this.error = null\n      \n      try {\n        // 模拟OKX钱包连接\n        await new Promise(resolve => setTimeout(resolve, 2000))\n        \n        // 这里应该实际连接OKX钱包\n        console.log('连接OKX钱包')\n        \n        // 使用 Pinia store 保存连接状态\n        const mockAddress = '0x' + Math.random().toString(16).substr(2, 40)\n        this.appStore.connectWallet(mockAddress, 'OKX')\n        \n      } catch (error) {\n        this.error = '连接失败，请重试'\n        console.error('钱包连接失败:', error)\n      } finally {\n        this.connecting = false\n      }\n    },\n    \n    disconnectWallet() {\n      this.appStore.disconnectWallet()\n    },\n    \n    submitWish() {\n      if (this.wishText.trim() && this.appStore.isWalletConnected) {\n        // 保存许愿内容到store\n        this.appStore.saveUserWish(this.wishText)\n        // 直接跳转到算命页面（不再需要login页面）\n        this.navigateTo('/calculate')\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.input-page {\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  padding: 2rem;\n  position: relative;\n}\n\n.language-switcher {\n  position: fixed;\n  top: 20px;\n  left: 20px;\n  z-index: 1000;\n  display: flex;\n  gap: 10px;\n\n  button {\n    padding: 8px 16px;\n    border: 1px solid #ddd;\n    background: rgba(255, 255, 255, 0.9);\n    border-radius: 4px;\n    cursor: pointer;\n    transition: all 0.3s;\n    backdrop-filter: blur(10px);\n\n    &:hover {\n      background: rgba(255, 255, 255, 1);\n    }\n\n    &.active {\n      background: #007bff;\n      color: white;\n      border-color: #007bff;\n    }\n  }\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\nh1 {\n  text-align: center;\n  color: white;\n  margin-bottom: 2rem;\n  font-size: 2.5rem;\n}\n\n.main-content {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 2rem;\n  align-items: start;\n}\n\n.wish-section {\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 20px;\n  padding: 2rem;\n  backdrop-filter: blur(10px);\n}\n\n.wish-pool {\n  width: 100%;\n}\n\n.pool-container {\n  position: relative;\n  margin-bottom: 1.5rem;\n}\n\n.wish-input {\n  width: 100%;\n  border: 2px solid #ddd;\n  border-radius: 10px;\n  padding: 1rem;\n  font-size: 1.1rem;\n  resize: vertical;\n  min-height: 120px;\n  font-family: inherit;\n}\n\n.wish-input:focus {\n  outline: none;\n  border-color: #667eea;\n}\n\n.char-counter {\n  position: absolute;\n  bottom: 10px;\n  right: 15px;\n  color: #888;\n  font-size: 0.9rem;\n}\n\n.submit-btn {\n  width: 100%;\n  padding: 1rem;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 10px;\n  font-size: 1.2rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.submit-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);\n}\n\n.submit-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.wallet-warning {\n  margin-top: 1rem;\n  padding: 0.8rem;\n  background: #fff3cd;\n  color: #856404;\n  border-radius: 8px;\n  text-align: center;\n  font-size: 0.9rem;\n}\n\n.wallet-section {\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 20px;\n  padding: 2rem;\n  backdrop-filter: blur(10px);\n}\n\n.wallet-connect h2,\n.wallet-connected h2 {\n  color: #333;\n  margin-bottom: 1rem;\n  text-align: center;\n}\n\n.connect-description {\n  text-align: center;\n  color: #666;\n  margin-bottom: 2rem;\n}\n\n/* 连接按钮样式 */\n.connect-btn {\n  height: 2rem;\n  border-radius: 9999px;\n  border: 1px solid #171717;\n  background: #171717;\n  padding: 0 0.625rem;\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: #667eea;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  margin-bottom: 1rem;\n  width: 100%;\n  \n  &:hover:not(:disabled) {\n    border-color: #667eea;\n    background: #0a0a0a;\n  }\n  \n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n}\n\n@media (min-width: 768px) {\n  .connect-btn {\n    height: 2.25rem;\n  }\n}\n\n/* 钱包选项按钮样式 */\n.wallet-option-btn {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  border-radius: 0.75rem;\n  border: 1px solid #262626;\n  background: #171717;\n  font-size: 0.75rem;\n  height: 6rem;\n  width: 100%;\n  gap: 1rem;\n  padding: 1rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: #e5e5e5;\n  overflow: hidden;\n  \n  &:hover:not(:disabled) {\n    border-color: #404040;\n    background: #1a1a1a;\n  }\n  \n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n}\n\n@media (min-width: 768px) {\n  .wallet-option-btn {\n    font-size: 0.875rem;\n  }\n}\n\n/* NEW 徽章 */\n.new-badge {\n  position: absolute;\n  top: -0.375rem;\n  right: 1rem;\n  border-radius: 0.25rem;\n  background: #667eea;\n  padding: 0.125rem 0.25rem;\n  font-size: 0.75rem;\n  font-weight: 700;\n  color: rgba(7, 9, 15, 0.75);\n  z-index: 10;\n}\n\n/* 钱包图标容器 */\n.wallet-icon-container {\n  display: flex;\n  width: 2.625rem;\n  height: 2.625rem;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.wallet-icon-bg {\n  width: 2rem;\n  height: 2rem;\n  border-radius: 0.5rem;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n}\n\n/* 钱包信息区域 */\n.wallet-info-modern {\n  flex: 1;\n  text-align: left;\n  z-index: 10;\n  position: relative;\n}\n\n.wallet-title {\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  font-size: 1rem;\n  font-weight: 600;\n  color: #e5e5e5;\n  margin: 0 0 0.125rem 0;\n}\n\n.wallet-desc {\n  position: relative;\n  z-index: 10;\n  max-width: 10.625rem;\n  font-size: 0.75rem;\n  font-weight: 500;\n  color: #737373;\n  margin: 0;\n}\n\n/* 装饰性SVG背景 */\n.wallet-bg-svg {\n  position: absolute;\n  right: -1.25rem;\n  width: 13.75rem;\n  height: 3.375rem;\n  pointer-events: none;\n}\n\n@media (min-width: 768px) {\n  .wallet-bg-svg {\n    width: 18.75rem;\n  }\n}\n\n.wallet-connected {\n  text-align: center;\n}\n\n.connected-info {\n  background: #f8f9fa;\n  border-radius: 10px;\n  padding: 1.5rem;\n  margin: 1.5rem 0;\n}\n\n.wallet-address,\n.wallet-type {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 0.5rem;\n  \n  &:last-child {\n    margin-bottom: 0;\n  }\n}\n\n.label {\n  color: #666;\n  font-weight: 500;\n}\n\n.address,\n.type {\n  color: #333;\n  font-family: monospace;\n}\n\n.disconnect-btn {\n  padding: 0.8rem 1.5rem;\n  background: #dc3545;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.disconnect-btn:hover {\n  background: #c82333;\n  transform: translateY(-1px);\n}\n\n.error-message {\n  margin-top: 1rem;\n  padding: 1rem;\n  background: #ffe6e6;\n  color: #cc0000;\n  border-radius: 8px;\n  text-align: center;\n}\n\n/* 连接状态动画 */\n.wallet-option-btn.connecting .wallet-icon-bg {\n  animation: pulse 1s infinite;\n}\n\n.wallet-option-btn.connecting {\n  border-color: #667eea;\n  background: #1e1b4b;\n}\n\n@keyframes pulse {\n  0% { opacity: 1; transform: scale(1); }\n  50% { opacity: 0.7; transform: scale(1.05); }\n  100% { opacity: 1; transform: scale(1); }\n}\n\n@media (max-width: 768px) {\n  .language-switcher {\n    top: 10px;\n    left: 10px;\n    \n    button {\n      padding: 6px 12px;\n      font-size: 12px;\n    }\n  }\n\n  .main-content {\n    grid-template-columns: 1fr;\n    gap: 1rem;\n  }\n\n  .wish-section {\n    order: 2;\n  }\n\n  .wallet-section {\n    order: 1;\n  }\n  \n  .wallet-option-btn {\n    height: 5rem;\n    padding: 0.75rem;\n    gap: 0.75rem;\n  }\n  \n  .wallet-title {\n    font-size: 0.875rem;\n  }\n  \n  .wallet-desc {\n    font-size: 0.625rem;\n    max-width: 8rem;\n  }\n  \n  .wallet-bg-svg {\n    width: 11rem;\n    right: -0.5rem;\n  }\n}\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAY;;EAEhBA,KAAK,EAAC;AAAmB;;EAgBzBA,KAAK,EAAC;AAAe;;;EAQZA,KAAK,EAAC;;;EACVA,KAAK,EAAC;AAAsB;;EAKjCA,KAAK,EAAC;AAAW;;EAGfA,KAAK,EAAC;AAAc;;EAElBA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAgB;;;EAQpBA,KAAK,EAAC;AAAc;;;uBA/CrCC,mBAAA,CA4DM,OA5DNC,UA4DM,GA3DJC,mBAAA,sBAAyB,EACzBC,mBAAA,CAaM,OAbNC,UAaM,GAZJD,mBAAA,CAKS;IAJNE,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAC,cAAc;IACrBV,KAAK,EAAAW,eAAA;MAAAC,MAAA,EAAYH,MAAA,CAAAI,aAAa;IAAA;KAChC,MAED,kBACAT,mBAAA,CAKS;IAJNE,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAC,cAAc;IACrBV,KAAK,EAAAW,eAAA;MAAAC,MAAA,EAAYH,MAAA,CAAAI,aAAa;IAAA;KAChC,WAED,iB,GAGFV,mBAAA,eAAkB,EAClBC,mBAAA,CAYM,OAZNU,UAYM,G,CAVKL,MAAA,CAAAM,QAAQ,CAACC,iBAAiB,I,cADnCf,mBAAA,CAMS;;IAJNK,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAES,IAAA,CAAAC,eAAe;IACvBlB,KAAK,EAAC;KACP,WAED,M,cACAC,mBAAA,CAGM,OAHNkB,UAGM,GAFJf,mBAAA,CAA4D,QAA5DgB,UAA4D,EAAAC,gBAAA,CAAtBZ,MAAA,CAAAa,YAAY,kBAClDlB,mBAAA,CAAyE;IAAhEE,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAgB,IAAA,KAAEC,QAAA,CAAAC,gBAAA,IAAAD,QAAA,CAAAC,gBAAA,IAAAF,IAAA,CAAgB;IAAEvB,KAAK,EAAC;KAAuB,GAAC,E,MAIpEI,mBAAA,CA2BM,OA3BNsB,UA2BM,GA1BJtB,mBAAA,CAAgC,YAAAiB,gBAAA,CAAzBJ,IAAA,CAAAU,EAAE,iCAETvB,mBAAA,CAuBM,OAvBNwB,UAuBM,GAtBJzB,mBAAA,SAAY,EACZC,mBAAA,CAoBM,OApBNyB,UAoBM,GAnBJzB,mBAAA,CAkBM,OAlBN0B,UAkBM,GAjBJ1B,mBAAA,CASM,OATN2B,WASM,G,gBARJ3B,mBAAA,CAMY;+DALD4B,KAAA,CAAAC,QAAQ,GAAAzB,MAAA;IAChB0B,WAAW,EAAEjB,IAAA,CAAAU,EAAE;IAChB3B,KAAK,EAAC,YAAY;IAClBmC,IAAI,EAAC,GAAG;IACRC,SAAS,EAAC;uDAJDJ,KAAA,CAAAC,QAAQ,E,GAMnB7B,mBAAA,CAAyD,OAAzDiC,WAAyD,EAAAhB,gBAAA,CAA5BW,KAAA,CAAAC,QAAQ,CAACK,MAAM,IAAG,MAAI,gB,GAErDlC,mBAAA,CAMS;IALNE,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAgB,IAAA,KAAEC,QAAA,CAAAe,UAAA,IAAAf,QAAA,CAAAe,UAAA,IAAAhB,IAAA,CAAU;IACjBiB,QAAQ,GAAGR,KAAA,CAAAC,QAAQ,CAACQ,IAAI;IACzBzC,KAAK,EAAC;sBAEHiB,IAAA,CAAAU,EAAE,wCAAAe,WAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}