{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"payment-page\"\n};\nconst _hoisted_2 = {\n  class: \"container\"\n};\nconst _hoisted_3 = {\n  class: \"payment-container\"\n};\nconst _hoisted_4 = {\n  class: \"payment-summary\"\n};\nconst _hoisted_5 = {\n  class: \"summary-item\"\n};\nconst _hoisted_6 = {\n  class: \"summary-item\"\n};\nconst _hoisted_7 = {\n  class: \"summary-item total\"\n};\nconst _hoisted_8 = {\n  class: \"payment-actions\"\n};\nconst _hoisted_9 = [\"disabled\"];\nconst _hoisted_10 = {\n  key: 0\n};\nconst _hoisted_11 = {\n  key: 1\n};\nconst _hoisted_12 = {\n  key: 0,\n  class: \"payment-progress\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"h1\", null, _toDisplayString(_ctx.$t('payment.title')), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_cache[4] || (_cache[4] = _createElementVNode(\"h2\", null, \"支付确认\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_5, [_cache[1] || (_cache[1] = _createElementVNode(\"span\", null, \"香火数量:\", -1 /* CACHED */)), _createElementVNode(\"span\", null, _toDisplayString($data.paymentInfo.incenseCount || 1), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_6, [_cache[2] || (_cache[2] = _createElementVNode(\"span\", null, \"币种:\", -1 /* CACHED */)), _createElementVNode(\"span\", null, _toDisplayString($data.paymentInfo.currency || 'SOL'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_7, [_cache[3] || (_cache[3] = _createElementVNode(\"span\", null, \"总计:\", -1 /* CACHED */)), _createElementVNode(\"span\", null, _toDisplayString($data.paymentInfo.totalPrice || '0.01') + \" \" + _toDisplayString($data.paymentInfo.currency || 'SOL'), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.confirmPayment && $options.confirmPayment(...args)),\n    disabled: $data.paying,\n    class: \"pay-btn\"\n  }, [$data.paying ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, \"支付中...\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_11, \"确认支付\"))], 8 /* PROPS */, _hoisted_9)]), $data.paying ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, _cache[5] || (_cache[5] = [_createElementVNode(\"div\", {\n    class: \"spinner\"\n  }, null, -1 /* CACHED */), _createElementVNode(\"p\", null, \"正在处理支付...\", -1 /* CACHED */)]))) : _createCommentVNode(\"v-if\", true)])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_toDisplayString","_ctx","$t","_hoisted_3","_hoisted_4","_hoisted_5","$data","paymentInfo","incenseCount","_hoisted_6","currency","_hoisted_7","totalPrice","_hoisted_8","onClick","_cache","args","$options","confirmPayment","disabled","paying","_hoisted_10","_hoisted_11","_hoisted_12"],"sources":["/Users/Jordan/workSpace/temple/src/views/PaymentPage.vue"],"sourcesContent":["<template>\n  <div class=\"payment-page\">\n    <div class=\"container\">\n      <h1>{{ $t('payment.title') }}</h1>\n      <div class=\"payment-container\">\n        <div class=\"payment-summary\">\n          <h2>支付确认</h2>\n          <div class=\"summary-item\">\n            <span>香火数量:</span>\n            <span>{{ paymentInfo.incenseCount || 1 }}</span>\n          </div>\n          <div class=\"summary-item\">\n            <span>币种:</span>\n            <span>{{ paymentInfo.currency || 'SOL' }}</span>\n          </div>\n          <div class=\"summary-item total\">\n            <span>总计:</span>\n            <span>{{ paymentInfo.totalPrice || '0.01' }} {{ paymentInfo.currency || 'SOL' }}</span>\n          </div>\n        </div>\n        \n        <div class=\"payment-actions\">\n          <button \n            @click=\"confirmPayment\"\n            :disabled=\"paying\"\n            class=\"pay-btn\"\n          >\n            <span v-if=\"paying\">支付中...</span>\n            <span v-else>确认支付</span>\n          </button>\n        </div>\n        \n        <div v-if=\"paying\" class=\"payment-progress\">\n          <div class=\"spinner\"></div>\n          <p>正在处理支付...</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { useRouter } from 'vue-router'\nimport { useAppStore } from '@/stores/app'\nimport { useI18n } from 'vue-i18n'\n\nexport default {\n  name: 'PaymentPage',\n  setup() {\n    const router = useRouter()\n    const appStore = useAppStore()\n    const { t } = useI18n()\n    \n    // 语言感知的导航函数\n    const navigateTo = (path) => {\n      const currentPath = router.currentRoute.value.path\n      const isEnglish = currentPath.startsWith('/en')\n      const targetPath = isEnglish ? `/en${path}` : path\n      router.push(targetPath)\n    }\n    \n    return {\n      router,\n      appStore,\n      t,\n      navigateTo\n    }\n  },\n  data() {\n    return {\n      paying: false,\n      paymentInfo: {}\n    }\n  },\n  mounted() {\n    // 从localStorage获取支付信息\n    const savedPaymentInfo = localStorage.getItem('paymentInfo')\n    if (savedPaymentInfo) {\n      try {\n        this.paymentInfo = JSON.parse(savedPaymentInfo)\n      } catch (error) {\n        console.error('Failed to parse payment info:', error)\n        this.paymentInfo = {}\n      }\n    }\n    \n    // 如果没有支付信息，设置默认值\n    if (!this.paymentInfo.incenseCount) {\n      this.paymentInfo = {\n        incenseCount: 1,\n        currency: 'SOL',\n        totalPrice: '0.01'\n      }\n    }\n  },\n  methods: {\n    async confirmPayment() {\n      this.paying = true\n      \n      try {\n        // 模拟支付过程\n        await new Promise(resolve => setTimeout(resolve, 3000))\n        \n        // 添加香火记录到store\n        this.appStore.addIncenseRecord({\n          amount: this.paymentInfo.incenseCount,\n          currency: this.paymentInfo.currency,\n          totalPrice: this.paymentInfo.totalPrice,\n          status: 'completed'\n        })\n        \n        // 增加功德分\n        const meritPoints = this.paymentInfo.incenseCount * 10\n        this.appStore.addMeritPoints(meritPoints)\n        \n        // 清除支付信息\n        localStorage.removeItem('paymentInfo')\n        \n        // 支付成功，跳转到上香页面\n        this.router.push('/worship')\n        \n      } catch (error) {\n        console.error('支付失败:', error)\n        alert('支付失败，请重试')\n      } finally {\n        this.paying = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.payment-page {\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n}\n\n.container {\n  max-width: 500px;\n  width: 100%;\n}\n\nh1 {\n  text-align: center;\n  color: white;\n  margin-bottom: 2rem;\n  font-size: 2.5rem;\n}\n\n.payment-container {\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 20px;\n  padding: 2rem;\n  backdrop-filter: blur(10px);\n}\n\n.payment-summary {\n  margin-bottom: 2rem;\n}\n\n.payment-summary h2 {\n  color: #333;\n  margin-bottom: 1rem;\n  text-align: center;\n}\n\n.summary-item {\n  display: flex;\n  justify-content: space-between;\n  padding: 1rem 0;\n  border-bottom: 1px solid #eee;\n}\n\n.summary-item.total {\n  font-weight: 600;\n  font-size: 1.2rem;\n  color: #667eea;\n  border-bottom: none;\n}\n\n.pay-btn {\n  width: 100%;\n  padding: 1rem;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 10px;\n  font-size: 1.2rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.pay-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);\n}\n\n.pay-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.payment-progress {\n  text-align: center;\n  margin-top: 2rem;\n}\n\n.spinner {\n  width: 40px;\n  height: 40px;\n  border: 4px solid #f3f3f3;\n  border-top: 4px solid #667eea;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 1rem;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAW;;EAEfA,KAAK,EAAC;AAAmB;;EACvBA,KAAK,EAAC;AAAiB;;EAErBA,KAAK,EAAC;AAAc;;EAIpBA,KAAK,EAAC;AAAc;;EAIpBA,KAAK,EAAC;AAAoB;;EAM5BA,KAAK,EAAC;AAAiB;;;;;;;;;;EAWTA,KAAK,EAAC;;;uBA/B/BC,mBAAA,CAqCM,OArCNC,UAqCM,GApCJC,mBAAA,CAmCM,OAnCNC,UAmCM,GAlCJD,mBAAA,CAAkC,YAAAE,gBAAA,CAA3BC,IAAA,CAAAC,EAAE,mCACTJ,mBAAA,CAgCM,OAhCNK,UAgCM,GA/BJL,mBAAA,CAcM,OAdNM,UAcM,G,0BAbJN,mBAAA,CAAa,YAAT,MAAI,qBACRA,mBAAA,CAGM,OAHNO,UAGM,G,0BAFJP,mBAAA,CAAkB,cAAZ,OAAK,qBACXA,mBAAA,CAAgD,cAAAE,gBAAA,CAAvCM,KAAA,CAAAC,WAAW,CAACC,YAAY,sB,GAEnCV,mBAAA,CAGM,OAHNW,UAGM,G,0BAFJX,mBAAA,CAAgB,cAAV,KAAG,qBACTA,mBAAA,CAAgD,cAAAE,gBAAA,CAAvCM,KAAA,CAAAC,WAAW,CAACG,QAAQ,0B,GAE/BZ,mBAAA,CAGM,OAHNa,UAGM,G,0BAFJb,mBAAA,CAAgB,cAAV,KAAG,qBACTA,mBAAA,CAAuF,cAAAE,gBAAA,CAA9EM,KAAA,CAAAC,WAAW,CAACK,UAAU,cAAa,GAAC,GAAAZ,gBAAA,CAAGM,KAAA,CAAAC,WAAW,CAACG,QAAQ,0B,KAIxEZ,mBAAA,CASM,OATNe,UASM,GARJf,mBAAA,CAOS;IANNgB,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,cAAA,IAAAD,QAAA,CAAAC,cAAA,IAAAF,IAAA,CAAc;IACrBG,QAAQ,EAAEb,KAAA,CAAAc,MAAM;IACjBzB,KAAK,EAAC;MAEMW,KAAA,CAAAc,MAAM,I,cAAlBxB,mBAAA,CAAiC,QAAAyB,WAAA,EAAb,QAAM,M,cAC1BzB,mBAAA,CAAwB,QAAA0B,WAAA,EAAX,MAAI,G,gCAIVhB,KAAA,CAAAc,MAAM,I,cAAjBxB,mBAAA,CAGM,OAHN2B,WAGM,EAAAR,MAAA,QAAAA,MAAA,OAFJjB,mBAAA,CAA2B;IAAtBH,KAAK,EAAC;EAAS,2BACpBG,mBAAA,CAAgB,WAAb,WAAS,mB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}